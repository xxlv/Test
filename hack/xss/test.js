var topicLink=function(t){if(t){for(var e=new RegExp("#([^#]+)#","ig"),n=new RegExp("#[0-9]{2,3};","ig"),r=null,a="",i=0;null!=(r=e.exec(t));)n.test(r[0])||(a+=t.substring(i,e.lastIndex-r[0].length),a+='<a href="http://i.dxy.cn/topic/=',a+=BASE64.encode(encodeURIComponent(r[1])),a+='">',a+=r[0],a+="</a>",i=e.lastIndex);return i<t.length&&(a+=t.substring(i)),a}return t},donothing=function(){};Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var snsutil={isEmpty:function(t){return"undefined"==typeof t||null==t||""==t},isEmptyInput:function(t){if(this.exists(t)){var e=jQuery("#"+t);return this.isEmpty(e.attr("value"))||e.attr("value")==e.attr("emptyText")?(e.focus(),!0):!1}return!0},isNotEmpty:function(t){return!this.isEmpty(t)},getValue:function(t,e){return this.isEmpty(t)?e:t},exists:function(t){return this.isEmpty(t)?!1:jQuery(("#"==t.charAt(0)?"":"#")+t).length>0},dateFormat:function(t,e){return new Date(t).format(this.getValue(e,"MM-dd hh:mm"))},getDynamicDateString:function(t){var e=new Date,n=new Date,r=new Date(t);return n.setHours(0,0,0,0),r>e?"刚刚":r>n?this.dateFormat(t,"hh:mm"):r.getFullYear()===n.getFullYear()?this.dateFormat(t,"MM-dd"):this.dateFormat(t,"yyyy-MM-dd")},toggle:function(t,e,n,r){jQuery("#"+t+snsutil.getValue(r,"")).toggle(n),jQuery("#"+e+snsutil.getValue(r,"")).toggle(!n)},getPage:function(){var t=snsutil.getValue(window.location.pathname.substring(1),"home");return-1!=t.indexOf("/")?t.substring(0,t.indexOf("/")):t},toHash:function(t,e,n,r,a){var i={h:encodeURI(e)};return snsutil.isNotEmpty(t)&&"home"!=t&&(i.p=t),snsutil.isNotEmpty(n)&&!jQuery.isEmptyObject(n)&&(i.d=n),snsutil.isNotEmpty(r)&&"content"!=r&&(i.v=r),snsutil.isNotEmpty(a)&&"scrollto"!=a&&(i.s=a),i.t=Math.round(100*Math.random()),BASE64.encode(encodeURI(JSON.stringify(i)))},fromHash:function(){try{return snsutil.getValue(JSON.parse(decodeURI(BASE64.decode(location.hash))),{})}catch(t){}return{}},substitute:function(t){function e(t,e){var n;return $.each(e,function(e,r){t===r&&(n=e)}),n}var n=["001","002","004","006","008","011","012","013","014","015","021","022","025","027","029","031","032","033","034","036","037","038","040","041","042","043","046","048","049","050","051","052","057","060","061","062","063","064","065","066","067","068","073","077","080","081","082","088"],r=["呵呵","生病","怒","嘻嘻","悲伤","抓狂","吐","花心","偷笑","可爱","汗","哈哈","酷","疑问","晕","衰","骷髅","哼","拜拜","吃惊","挖鼻屎","鼓掌","嘻嘻","左哼哼","右哼哼","打哈欠","泪","阴险","亲亲","黑线","悲伤","怒骂","害羞","猪头","心","伤心","爱你","心","伤心","蛋糕","奥特曼","闭嘴","弱","good","握手","耶","抱拳","ok"];return snsutil.isEmpty(t)?"":(t=t.replace(/(https?:\/\/[^\s'"]+\.[^\s'\"\u4e00-\u9fa5]+)/gi,'<a href="$1" target="_blank">$1</a>'),t=t.replace(/@([a-zA-Z0-9_\u4e00-\u9fa5-]{1,16})(?=($|[\s|@]))/gi,'<a href="http://i.dxy.cn/profile/$1">@$1</a>'),$.each(r,function(e,r){for(;-1!==t.indexOf("["+r+"]");)t=t.replace(r,":"+n[e])}),-1!==t.search(/(\[:(\d+)\])/gi)&&$.each(t.match(/(\[:(\d+)\])/gi),function(a,i){t=t.replace(i,'<img src="http://assets.dxycdn.com/third-party/xheditor/xheditor_emot/default/'+i.substr(2,3)+'.gif" title="['+r[e(i.substr(2,3),n)]+']" />')}),topicLink(t))},length:function(t){var e=0;if(snsutil.isNotEmpty(t))for(var n=0;n<t.length;n++)e+=t.charCodeAt(n)>255?2:1;return Math.round(e/2)},split:function(t){return snsutil.isEmpty(t)?new Array:t.split(",")},ad:function(t,e){t&&e&&$.ajax({url:"http://g.dxy.cn/api2.php?ids="+t,cache:!0,dataType:"script",success:function(n){ads&&ads["zone_"+t]?$("#"+e).html(ads["zone_"+t]):$("#"+e).hide()}})}},BASE64={enKey:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",deKey:new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),encode:function(t){for(var e,n,r,a=new Array,i=0;i+3<=t.length;)e=t.charCodeAt(i++),n=t.charCodeAt(i++),r=t.charCodeAt(i++),a.push(this.enKey.charAt(e>>2),this.enKey.charAt((e<<4)+(n>>4)&63)),a.push(this.enKey.charAt((n<<2)+(r>>6)&63),this.enKey.charAt(63&r));return i<t.length&&(e=t.charCodeAt(i++),a.push(this.enKey.charAt(e>>2)),i<t.length?(n=t.charCodeAt(i),a.push(this.enKey.charAt((e<<4)+(n>>4)&63)),a.push(this.enKey.charAt(n<<2&63),"=")):a.push(this.enKey.charAt(e<<4&63),"==")),a.join("")},decode:function(t){var e,n,r,a,i=new Array,o=0;for(t=t.replace(/[^A-Za-z0-9\+\/]/g,"");o+4<=t.length;)e=this.deKey[t.charCodeAt(o++)],n=this.deKey[t.charCodeAt(o++)],r=this.deKey[t.charCodeAt(o++)],a=this.deKey[t.charCodeAt(o++)],i.push(String.fromCharCode((e<<2&255)+(n>>4),(n<<4&255)+(r>>2),(r<<6&255)+a));return o+1<t.length&&(e=this.deKey[t.charCodeAt(o++)],n=this.deKey[t.charCodeAt(o++)],o<t.length?(r=this.deKey[t.charCodeAt(o)],i.push(String.fromCharCode((e<<2&255)+(n>>4),(n<<4&255)+(r>>2)))):i.push(String.fromCharCode((e<<2&255)+(n>>4)))),i.join("")}},JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,a,i,o,s=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,n=0;i>n;n+=1)o[n]=str(n,l)||"null";return a=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],a=str(r,l),a&&o.push(quote(r)+(gap?": ":":")+a));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(a=str(r,l),a&&o.push(quote(r)+(gap?": ":":")+a));return a=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,a=t[e];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r=walk(a,n),void 0!==r?a[n]=r:delete a[n]);return reviver.call(t,e,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){function n(e,n,r,a){var i={data:a||(n?n.data:{}),_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:p,nest:c,wrap:f,html:h,update:d};return e&&t.extend(i,e,{nodes:[],parent:n}),r&&(i.tmpl=r,i._ctnt=i._ctnt||i.tmpl(t,i),i.key=++_,(j.length?x:$)[_]=i),i}function r(e,n,i){var o,s=i?t.map(i,function(t){return"string"==typeof t?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+y+'="'+e.key+'" $2'):t:r(t,e,t._ctnt)}):e;return n?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,n,r,i){o=t(r).get(),u(o),n&&(o=a(n).concat(o)),i&&(o=o.concat(a(i)))}),o?o:a(s))}function a(e){var n=document.createElement("div");return n.innerHTML=e,t.makeArray(n.childNodes)}function i(e){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+t.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,n,r,a,i,o,l){var u,p,c,f=t.tmpl.tag[r];if(!f)throw"Template command not found: "+r;return u=f._default||[],o&&!/\w$/.test(i)&&(i+=o,o=""),i?(i=s(i),l=l?","+s(l)+")":o?")":"",p=o?i.indexOf(".")>-1?i+o:"("+i+").call($item"+l:i,c=o?p:"(typeof("+i+")==='function'?("+i+").call($item):("+i+"))"):c=p=u.$1||"null",a=s(a),"');"+f[n?"close":"open"].split("$notnull_1").join(i?"typeof("+i+")!=='undefined' && ("+i+")!=null":"true").split("$1a").join(c).split("$1").join(p).split("$2").join(a?a.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(t,e,n,r){return r=r?","+r+")":n?")":"",r?"("+e+").call($item"+r:t}):u.$2||"")+"_.push('"})+"');}return _;")}function o(e,n){e._wrap=r(e,!0,t.isArray(n)?n:[v.test(n)?n:t(n).html()]).join("")}function s(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function l(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function u(e){function r(e){function r(t){t+=u,o=p[t]=p[t]||n(o,$[o.parent.key+u]||o.parent,null,!0)}var a,i,o,s,l=e;if(s=e.getAttribute(y)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(a=l.getAttribute(y)););a!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(y)||0:0,(o=$[s])||(o=x[s],o=n(o,$[l]||x[l],null,!0),o.key=++_,$[_]=o),w&&r(s)),e.removeAttribute(y)}else w&&(o=t.data(e,"tmplItem"))&&(r(o.key),$[o.key]=o,l=t.data(e.parentNode,"tmplItem"),l=l?l.key:0);if(o){for(i=o;i&&i.key!=l;)i.nodes.push(e),i=i.parent;delete o._ctnt,delete o._wrap,t.data(e,"tmplItem",o)}}var a,i,o,s,l,u="_"+w,p={};for(o=0,s=e.length;s>o;o++)if(1===(a=e[o]).nodeType){for(i=a.getElementsByTagName("*"),l=i.length-1;l>=0;l--)r(i[l]);r(a)}}function p(t,e,n,r){return t?void j.push({_:t,tmpl:e,item:this,data:n,options:r}):j.pop()}function c(e,n,r){return t.tmpl(t.template(e),n,r,this)}function f(e,n){var r=e.options||{};return r.wrapped=n,t.tmpl(t.template(e.tmpl),e.data,r,e.item)}function h(e,n){var r=this._wrap;return t.map(t(t.isArray(r)?r.join(""):r).filter(e||"*"),function(t){return n?t.innerText||t.textContent:t.outerHTML||l(t)})}function d(){var e=this.nodes;t.tmpl(null,null,null,this).insertBefore(e[0]),t(e).remove()}var g,m=t.fn.domManip,y="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,$={},x={},C={key:0,data:{}},_=0,w=0,j=[];t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(r){var a,i,o,s,l=[],u=t(r),p=1===this.length&&this[0].parentNode;if(g=$||{},p&&11===p.nodeType&&1===p.childNodes.length&&1===u.length)u[n](this[0]),l=this;else{for(i=0,o=u.length;o>i;i++)w=i,a=(i>0?this.clone(!0):this).get(),t.fn[n].apply(t(u[i]),a),l=l.concat(a);w=0,l=this.pushStack(l,e,u.selector)}return s=g,g=null,t.tmpl.complete(s),l}}),t.fn.extend({tmpl:function(e,n,r){return t.tmpl(this[0],e,n,r)},tmplItem:function(){return t.tmplItem(this[0])},template:function(e){return t.template(e,this[0])},domManip:function(e,n,r,a){if(e[0]&&e[0].nodeType){for(var i,o=t.makeArray(arguments),s=e.length,l=0;s>l&&!(i=t.data(e[l++],"tmplItem")););s>1&&(o[0]=[t.makeArray(e)]),i&&w&&(o[2]=function(e){t.tmpl.afterManip(this,e,r)}),m.apply(this,o)}else m.apply(this,arguments);return w=0,g||t.tmpl.complete($),this}}),t.extend({tmpl:function(e,a,i,s){var l,u=!s;if(u)s=C,e=t.template[e]||t.template(null,e),x={};else if(!e)return e=s.tmpl,$[s.key]=s,s.nodes=[],s.wrapped&&o(s,s.wrapped),t(r(s,null,s.tmpl(t,s)));return e?("function"==typeof a&&(a=a.call(s||{})),i&&i.wrapped&&o(i,i.wrapped),l=t.isArray(a)?t.map(a,function(t){return t?n(i,s,e,t):null}):[n(i,s,e,a)],u?t(r(s,null,l)):l):[]},tmplItem:function(e){var n;for(e instanceof t&&(e=e[0]);e&&1===e.nodeType&&!(n=t.data(e,"tmplItem"))&&(e=e.parentNode););return n||C},template:function(e,n){return n?("string"==typeof n?n=i(n):n instanceof t&&(n=n[0]||{}),n.nodeType&&(n=t.data(n,"tmpl")||t.data(n,"tmpl",i(n.innerHTML))),"string"==typeof e?t.template[e]=n:n):e?"string"!=typeof e?t.template(null,e):t.template[e]||t.template(null,v.test(e)?e:t(e)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),t.extend(t.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(t){$={}},afterManip:function(e,n,r){var a=11===n.nodeType?t.makeArray(n.childNodes):1===n.nodeType?[n]:[];r.call(e,n),u(a),w++}})}(jQuery),function(t,e,n){"$:nomunge";function r(t){return t=t||location.href,"#"+t.replace(/^[^#]*#?(.*)$/,"$1")}var a,i="hashchange",o=document,s=t.event.special,l=o.documentMode,u="on"+i in e&&(l===n||l>7);t.fn[i]=function(t){return t?this.bind(i,t):this.trigger(i)},t.fn[i].delay=50,s[i]=t.extend(s[i],{setup:function(){return u?!1:void t(a.start)},teardown:function(){return u?!1:void t(a.stop)}}),a=function(){function a(){var n=r(),o=h(p);n!==p?(f(p=n,o),t(e).trigger(i)):o!==p&&(location.href=location.href.replace(/#.*/,"")+o),s=setTimeout(a,t.fn[i].delay)}var s,l={},p=r(),c=function(t){return t},f=c,h=c;return l.start=function(){s||a()},l.stop=function(){s&&clearTimeout(s),s=n},t.browser.msie&&!u&&function(){var e,n;l.start=function(){e||(n=t.fn[i].src,n=n&&n+r(),e=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||f(r()),a()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow,o.onpropertychange=function(){try{"title"===event.propertyName&&(e.document.title=o.title)}catch(t){}})},l.stop=c,h=function(){return r(e.location.href)},f=function(n,r){var a=e.document,s=t.fn[i].domain;n!==r&&(a.title=o.title,a.open(),s&&a.write('<script>document.domain="'+s+'"</script>'),a.close(),e.location.hash=n)}}(),l}()}(jQuery,this),jQuery.extend({highlighter:{__config__:{sourceHtmlDataKey:"__jquery.highlighter.data.sourceHTML__"}}}),jQuery.fn.highlight=function(t,e){t=t.replace(/\s+/g," ");var n="span",r=jQuery.extend({hClass:"highlight",hColor:"#C03",separator:" ",wrapper:n,useDefaultStyle:!0},e),a="string"==typeof r.hClass&&r.hClass.length>0,i=$("<"+r.wrapper+"/>");a?i.addClass(r.hClass):r.useDefaultStyle&&(i.css("color",r.hColor),n==r.wrapper&&i.css("font-style","normal"));var o=null;if("string"==typeof t){if(null==t||0==t.length)return!1;o=t.split(r.separator)}else{if(!jQuery.isArray(t))return!1;o=t}for(var s=0;s<o.length;s++)for(var l=o[s],u=o.length-1;u>s;u--)l==o[u]&&o.splice(u,1);var p=[{spChar:"\\",escapeChar:"\\\\"},{spChar:"$",escapeChar:"\\$"},{spChar:"(",escapeChar:"\\("},{spChar:")",escapeChar:"\\)"},{spChar:"*",escapeChar:"\\*"},{spChar:"+",escapeChar:"\\+"},{spChar:".",escapeChar:"\\."},{spChar:"[",escapeChar:"\\["},{spChar:"?",escapeChar:"\\?"},{spChar:"^",escapeChar:"\\^"},{spChar:"{",escapeChar:"\\{"},{spChar:"|",escapeChar:"\\|"}],c=/<\/?[a-z][a-z0-9]*[^<>]*>/gi,f=/&(?:[a-z]+?|#[0-9]+?|#x[0-9a-f]+?);/gi,h=$("<div />");return this.each(function(){var t=$(this),e=t.data(jQuery.highlighter.__config__.sourceHtmlDataKey);e||(e=t.html());for(var n=null,r=[];null!=(n=c.exec(e));){var a={start:n.index,end:c.lastIndex,tag:n[0]};r.push(a)}for(var s=[];null!=(n=f.exec(e));){var a={start:n.index,end:f.lastIndex,tag:n[0]};s.push(a)}for(var l=[],u=0;u<o.length;u++){var d=h.text(o[u]).html();jQuery.each(p,function(t,e){d=d.replace(e.spChar,e.escapeChar)});for(var g=new RegExp(d,"ig");null!=(n=g.exec(e));){var a={start:n.index,end:g.lastIndex};l.push(a)}}for(var u=l.length-1;u>=0;u--)for(var a=l[u],m=0;m<r.length;m++){var y=r[m];if(a.start>y.start&&a.end<y.end){l.splice(u,1);break}}for(var u=l.length-1;u>=0;u--)for(var a=l[u],m=0;m<s.length;m++){var v=s[m];if(a.start>v.start&&a.end<=v.end||a.start>=v.start&&a.end<v.end){l.splice(u,1);break}if(a.start>v.start&&a.start<v.end&&a.end>v.end||a.start<v.start&&a.end>v.start&&a.end<v.end){l.splice(u,1);break}}for(var x=[],u=0;u<l.length;u++){for(var a=l[u],m=l.length-1;m>u;m--){var C=l[m];a.start<=C.start&&a.end>=C.start&&a.end<C.end?(a.end=C.end,l.splice(m,1)):C.start<a.start&&C.end>=a.start&&C.end<=a.end?(a.start=C.start,l.splice(m,1)):a.start<=C.start&&a.end>=C.end?l.splice(m,1):a.start>=C.start&&a.end<=C.end&&(a.start=C.start,a.end=C.end,l.splice(m,1))}x.push(a)}x.sort(function(t,e){return t.start-e.start});var _=[],w=0;jQuery.each(x,function(t,n){w<n.start&&_.push(e.substring(w,n.start)),h.empty().append(i.clone().html(e.substring(n.start,n.end))),_.push(h.html()),w=n.end}),w<e.length&&_.push(e.substr(w)),t.html(_.join(""))})},$.fn.selectRange=function(t,e){return e||(e=t),this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(t,e);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select()}})};
